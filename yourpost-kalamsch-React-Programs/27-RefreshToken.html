<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Don't use this in production: -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      .progress-bar {
        width: 400px;
        background: #e3e2e2;
        height: 20px;
        position: relative;
      }
      .progress-bar b {
        position: absolute;
        left: 50%;
        top: 0px;
      }
      .progress-bar > div {
        background: green;
        height: 20px;
      }
      .token {
        font-size: 30px;
        letter-spacing: 10px;
      }
      .progress-circle {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        position: relative;
        margin-bottom: 30px;
      }
      .progress-circle b {
        position: absolute;
        top: 40%;
        left: 33%;
        color: blue;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const App = () => {
        const [val, setVal] = React.useState(0);
        const [width, setWidth] = React.useState(0);
        const [token, setToken] = React.useState("");

        const fnGenerateToken = () => {
          let chars = "";
          const randomchar = "0123456789";
          for (let i = 1; i <= 6; i++) {
            chars += randomchar.charAt(Math.random() * randomchar.length);
          }
          setToken(chars);
        };

        React.useEffect(() => {
          setWidth(() => {
            return (400 / 30) * val;
          });
        }, [val]);

        React.useEffect(() => {
          fnGenerateToken();
          const interval = setInterval(() => {
            setVal((preVal) => {
              if (preVal == 30) {
                fnGenerateToken();
                return 0;
              }
              return preVal + 1;
            });
          }, 1000);
        }, []);
        return (
          <div>
            <div className="token">{token}</div>
            <div
              style={{
                background: `radial-gradient(closest-side, white 79%, transparent 80% 100%),conic-gradient(red ${
                  (100 / 30) * val
                }%, green 0)`,
              }}
              className="progress-circle"
            >
              <b>{30 - val} sec</b>
            </div>
            <div
              style={{
                background: `conic-gradient(red ${
                  (100 / 30) * val
                }%, yellow 0)`,
              }}
              className="progress-circle"
            >
              <b>{30 - val} sec</b>
            </div>

            <div className="progress-bar">
              <div style={{ width }}></div>
              <b>{30 - val} sec</b>
            </div>
          </div>
        );
      };

      const container = document.getElementById("root");
      const root = ReactDOM.createRoot(container);
      root.render(<App />);
    </script>
  </body>
</html>
